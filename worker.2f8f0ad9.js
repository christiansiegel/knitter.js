parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"JZPE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.expose=c,exports.proxy=v,exports.transfer=h,exports.windowEndpoint=x,exports.wrap=l,exports.transferHandlers=exports.releaseProxy=exports.proxyMarker=exports.createEndpoint=void 0;const e=Symbol("Comlink.proxy");exports.proxyMarker=e;const t=Symbol("Comlink.endpoint");exports.createEndpoint=t;const n=Symbol("Comlink.releaseProxy");exports.releaseProxy=n;const r=Symbol("Comlink.thrown"),a=e=>"object"==typeof e&&null!==e||"function"==typeof e,s={canHandle:t=>a(t)&&t[e],serialize(e){const{port1:t,port2:n}=new MessageChannel;return c(e,t),[n,[n]]},deserialize:e=>(e.start(),l(e))},o={canHandle:e=>a(e)&&r in e,serialize({value:e}){let t;return[t=e instanceof Error?{isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:{isError:!1,value:e},[]]},deserialize(e){if(e.isError)throw Object.assign(new Error(e.value.message),e.value);throw e.value}},i=new Map([["proxy",s],["throw",o]]);function c(e,t=self){t.addEventListener("message",function n(a){if(!a||!a.data)return;const{id:s,type:o,path:i}=Object.assign({path:[]},a.data),p=(a.data.argumentList||[]).map(w);let l;try{const t=i.slice(0,-1).reduce((e,t)=>e[t],e),n=i.reduce((e,t)=>e[t],e);switch(o){case 0:l=n;break;case 1:t[i.slice(-1)[0]]=w(a.data.value),l=!0;break;case 2:l=n.apply(t,p);break;case 3:l=v(new n(...p));break;case 4:{const{port1:t,port2:n}=new MessageChannel;c(e,n),l=h(t,[t])}break;case 5:l=void 0}}catch(d){l={value:d,[r]:0}}Promise.resolve(l).catch(e=>({value:e,[r]:0})).then(e=>{const[r,a]=b(e);t.postMessage(Object.assign(Object.assign({},r),{id:s}),a),5===o&&(t.removeEventListener("message",n),u(t))})}),t.start&&t.start()}function p(e){return"MessagePort"===e.constructor.name}function u(e){p(e)&&e.close()}function l(e,t){return f(e,[],t)}function d(e){if(e)throw new Error("Proxy has been released and is not useable")}function f(e,r=[],a=function(){}){let s=!1;const o=new Proxy(a,{get(t,a){if(d(s),a===n)return()=>E(e,{type:5,path:r.map(e=>e.toString())}).then(()=>{u(e),s=!0});if("then"===a){if(0===r.length)return{then:()=>o};const t=E(e,{type:0,path:r.map(e=>e.toString())}).then(w);return t.then.bind(t)}return f(e,[...r,a])},set(t,n,a){d(s);const[o,i]=b(a);return E(e,{type:1,path:[...r,n].map(e=>e.toString()),value:o},i).then(w)},apply(n,a,o){d(s);const i=r[r.length-1];if(i===t)return E(e,{type:4}).then(w);if("bind"===i)return f(e,r.slice(0,-1));const[c,p]=g(o);return E(e,{type:2,path:r.map(e=>e.toString()),argumentList:c},p).then(w)},construct(t,n){d(s);const[a,o]=g(n);return E(e,{type:3,path:r.map(e=>e.toString()),argumentList:a},o).then(w)}});return o}function m(e){return Array.prototype.concat.apply([],e)}function g(e){const t=e.map(b);return[t.map(e=>e[0]),m(t.map(e=>e[1]))]}exports.transferHandlers=i;const y=new WeakMap;function h(e,t){return y.set(e,t),e}function v(t){return Object.assign(t,{[e]:!0})}function x(e,t=self,n="*"){return{postMessage:(t,r)=>e.postMessage(t,n,r),addEventListener:t.addEventListener.bind(t),removeEventListener:t.removeEventListener.bind(t)}}function b(e){for(const[t,n]of i)if(n.canHandle(e)){const[r,a]=n.serialize(e);return[{type:3,name:t,value:r},a]}return[{type:0,value:e},y.get(e)||[]]}function w(e){switch(e.type){case 3:return i.get(e.name).deserialize(e.value);case 0:return e.value}}function E(e,t,n){return new Promise(r=>{const a=M();e.addEventListener("message",function t(n){n.data&&n.data.id&&n.data.id===a&&(e.removeEventListener("message",t),r(n.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:a},t),n)})}function M(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}
},{}],"kRPb":[function(require,module,exports) {
"use strict";function t(t,n,e){return("circle"===e?s:a)(t,n)}function n(t){let n=-1/0,e=-1;for(const[r,i]of t.entries())i>n&&(e=r,n=i);return e}function e(t,n){return 255-n.reduce((n,e)=>n+t[e],0)/n.length}function r(t,n,e){const r=Math.round(255*e/100);n.forEach(n=>t[n]=Math.min(255,t[n]+r))}function i(t,n,e){const r=Math.abs(t-n);return Math.min(e-r,r)}function o(t,n){return t.id<n.id?1024*t.id+n.id:1024*n.id+t.id}function h(t,n,e){const r=Math.abs(n.x-t.x),i=-Math.abs(n.y-t.y),o=t.x<n.x?1:-1,h=t.y<n.y?1:-1,s=[],a=Object.assign({},t);let c,u=r+i;for(;s.push(a.y*e+a.x),a.x!=n.x||a.y!=n.y;)(c=2*u)>i&&(u+=i,a.x+=o),c<r&&(u+=r,a.y+=h);return s}function s(t,n){const e=Math.min(n.width,n.height),r=(n.width-e)/2,i=(n.height-e)/2,o=e/2-1,h=2*Math.PI/t,s=[];for(let a=0;a<t;a++)s.push({id:a,x:r+Math.round(o+o*Math.sin(a*h)),y:i+Math.round(o+o*Math.cos(Math.PI+a*h))});return s}function a(t,n){const e=Math.min(n.width,n.height)-2,r=(n.width-e)/2,i=(n.height-e)/2,o=Math.floor(t/4),h=e/o,s=[];for(let a=0;a<o;a++)s.push({id:s.length,x:r+Math.round(h*a),y:i});for(let a=0;a<o;a++)s.push({id:s.length,x:r+e,y:i+Math.round(h*a)});for(let a=0;a<o;a++)s.push({id:s.length,x:r+e-Math.round(h*a),y:i+e});for(let a=0;a<o;a++)s.push({id:s.length,x:r,y:i+e-Math.round(h*a)});return s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.calcPins=t,exports.indexOfMax=n,exports.calcScore=e,exports.fadePixels=r,exports.circularArrayIndexDistance=i,exports.makePinPairId=o,exports.getLineIndices=h,exports.calcCirclePins=s,exports.calcSquarePins=a;
},{}],"QpEN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Core=void 0;var i=require("./algorithms");class t{constructor(){this.params=void 0,this.lineIndicesCache={},this.usedPinPairIds={}}init(t){const e=JSON.stringify([t.numberOfPins,t.dimensions,t.shape]);this.pinParamsId!==e&&(this.pins=(0,i.calcPins)(t.numberOfPins,t.dimensions,t.shape),this.pinParamsId=e,this.lineIndicesCache={}),this.usedPinPairIds={},this.pattern=[0],this.params=t}getPins(){if(!this.pins)throw new Error("Core not initialized");return this.pins}getPattern(){if(!this.pattern)throw new Error("Core not initialized");return this.pattern}calcPattern(t){if(!this.pattern||!this.pins||!this.params)throw new Error("Core not initialized");const e=this.pins,s=this.params;for(let n=this.pattern.length;n<t;++n){const t=this.pins[this.pattern[this.pattern.length-1]],n=e=>!((0,i.makePinPairId)(t,e)in this.usedPinPairIds),r=n=>(0,i.circularArrayIndexDistance)(t.id,n.id,e.length)>=s.minimalDistance,a=e=>{const n=this.getLineIndicesCached(t,e,s.dimensions.width);return(0,i.calcScore)(s.pixels,n)};let h=e.filter(n);if(0===(h=h.filter(r)).length)return this.pattern;const d=h.map(a),c=h[(0,i.indexOfMax)(d)];void 0===c&&console.log(h);const o=this.getLineIndicesCached(t,c,s.dimensions.width);(0,i.fadePixels)(s.pixels,o,s.fadeRate),this.usedPinPairIds[(0,i.makePinPairId)(t,c)]=!0,this.pattern.push(c.id)}return this.pattern.slice(0,t)}getLineIndicesCached(t,e,s){const n=(0,i.makePinPairId)(t,e);if(n in this.lineIndicesCache)return this.lineIndicesCache[n];const r=(0,i.getLineIndices)(t,e,s);return this.lineIndicesCache[n]=r,r}}exports.Core=t;
},{"./algorithms":"kRPb"}],"ZXZ8":[function(require,module,exports) {
"use strict";var e=require("comlink"),r=require("./core");(0,e.expose)(r.Core);
},{"comlink":"JZPE","./core":"QpEN"}]},{},["ZXZ8"], null)